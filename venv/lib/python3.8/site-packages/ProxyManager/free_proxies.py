# AUTOGENERATED! DO NOT EDIT! File to edit: 01_free_proxies.ipynb (unless otherwise specified).

__all__ = ['get_free']

# Cell
import requests
from bs4 import BeautifulSoup

# Cell
def get_free(num=None):
    r = requests.get('https://free-proxy-list.net/')
    soup = BeautifulSoup(r.text, 'lxml')
    table = soup.find('table', {'id':'proxylisttable'})
    rows = table.find_all('tr')

    proxies = []

    for index, row in enumerate(rows):
        if index == 0: continue
        data = row.find_all('td')
        if len(data) == 0: continue
        data_dict = {'ip':data[0].get_text(), 'port':data[1].get_text(),
                     'country': data[2].get_text(), 'anonymity':data[3].get_text(),
                     'https':data[4].get_text()}
        proxies.append(data_dict)
        if num == len(proxies): return proxies

    return proxies
